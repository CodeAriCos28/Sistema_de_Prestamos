<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gesti√≥n de Pagos</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Base Styles and Variables */
        :root {
            --primary-color: #2563eb;
            --primary-hover: #1d4ed8;
            --secondary-color: #f9fafb;
            --text-color: #1e293b;
            --text-secondary: #64748b;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --border-color: #e2e8f0;
            --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --input-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --transition-standard: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --sidebar-width: 280px;
            --sidebar-collapsed-width: 80px;
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
        }

        /* Reset and Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            color: var(--text-color);
            background-color: #f8fafc;
            line-height: 1.5;
            font-size: 16px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        button, input, select, textarea {
            font-family: inherit;
            font-size: inherit;
            color: inherit;
        }

        a {
            color: inherit;
            text-decoration: none;
        }

        ul {
            list-style: none;
        }

        /* Layout */
        .app-container {
            display: flex;
            min-height: 100vh;
            transition: var(--transition-standard);
        }

        .sidebar {
            width: var(--sidebar-width);
            background-color: white;
            border-right: 1px solid var(--border-color);
            position: fixed;
            height: 100vh;
            transition: var(--transition-standard);
            z-index: 100;
            display: flex;
            flex-direction: column;
        }

        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            transition: var(--transition-standard);
        }

        /* When sidebar is collapsed */
        .sidebar-collapsed .sidebar {
            width: var(--sidebar-collapsed-width);
        }

        .sidebar-collapsed .sidebar-title,
        .sidebar-collapsed .nav-item span {
            display: none;
        }

        .sidebar-collapsed .main-content {
            margin-left: var(--sidebar-collapsed-width);
        }

        /* Sidebar Styles */
        .logo-container {
            display: flex;
            align-items: center;
            padding: 24px 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 10px;
            font-weight: 600;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .sidebar-title {
            font-size: 18px;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
        }

        .sidebar-nav {
            padding: 24px 0;
            overflow-y: auto;
            flex: 1;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition-standard);
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            border-left: 3px solid transparent;
        }

        .nav-item svg {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .nav-item:hover {
            color: var(--primary-color);
            background-color: rgba(37, 99, 235, 0.05);
        }

        .nav-item.active {
            color: var(--primary-color);
            background-color: rgba(37, 99, 235, 0.1);
            border-left: 3px solid var(--primary-color);
            font-weight: 500;
        }

        /* Main Header */
        .main-header {
            padding: 16px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: white;
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .date-user {
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .current-date {
            font-weight: 500;
        }

        .user-info {
            color: var(--text-secondary);
        }

        .toggle-sidebar {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            transition: var(--transition-standard);
        }

        .toggle-sidebar:hover {
            background-color: var(--secondary-color);
            color: var(--primary-color);
        }

        /* Content Sections */
        .content-section {
            padding: 24px;
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        .content-section.active {
            display: block;
        }

        .section-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 24px;
            color: var(--text-color);
        }

        .subsection-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text-color);
        }

        /* Dashboard Cards */
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .summary-card {
            background-color: white;
            border-radius: var(--radius-md);
            padding: 24px;
            box-shadow: var(--card-shadow);
            display: flex;
            align-items: center;
            transition: var(--transition-standard);
        }

        .summary-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .summary-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
            flex-shrink: 0;
        }

        .summary-icon svg {
            width: 24px;
            height: 24px;
        }

        .pending-icon {
            background-color: rgba(245, 158, 11, 0.1);
            color: var(--warning-color);
        }

        .completed-icon {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success-color);
        }

        .total-icon {
            background-color: rgba(37, 99, 235, 0.1);
            color: var(--primary-color);
        }

        .balance-icon {
            background-color: rgba(139, 92, 246, 0.1);
            color: #8b5cf6;
        }

        .summary-content h3 {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .summary-content p {
            font-size: 24px;
            font-weight: 600;
        }

        .full-width {
            grid-column: 1 / -1;
            display: block;
        }

        .summary-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .register-date {
            font-weight: 500;
            color: var(--text-secondary);
        }

        .summary-body {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .summary-row.total {
            font-weight: 600;
            padding-top: 8px;
            margin-top: 8px;
            border-top: 1px solid var(--border-color);
        }

        .summary-row.difference {
            color: var(--danger-color);
            font-weight: 600;
        }

        .balance-input {
            border: 1px solid var(--border-color);
            padding: 8px 12px;
            border-radius: var(--radius-sm);
            width: 150px;
            text-align: right;
            box-shadow: var(--input-shadow);
            transition: var(--transition-standard);
        }

        .balance-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
        }

        /* Recent Activity */
        .recent-activity {
            background-color: white;
            border-radius: var(--radius-md);
            padding: 24px;
            box-shadow: var(--card-shadow);
        }

        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .activity-item {
            display: flex;
            align-items: center;
            padding: 16px;
            border-radius: var(--radius-sm);
            background-color: var(--secondary-color);
            transition: var(--transition-standard);
        }

        .activity-item:hover {
            background-color: #f1f5f9;
        }

        .activity-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
            flex-shrink: 0;
        }

        .payment-received {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success-color);
        }

        .payment-overdue {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger-color);
        }

        .activity-content {
            flex: 1;
        }

        .activity-title {
            font-weight: 500;
            margin-bottom: 4px;
        }

        .activity-details {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .activity-amount {
            font-weight: 600;
        }

        /* Search and Filters */
        .search-container {
            margin-bottom: 24px;
        }

        .search-box {
            display: flex;
            align-items: center;
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: 0 16px;
            box-shadow: var(--input-shadow);
            position: relative;
            width: 100%;
            max-width: 500px;
            transition: var(--transition-standard);
        }

        .wide-search {
            max-width: 100%;
        }

        .search-box:focus-within {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
        }

        .search-box svg {
            color: var(--text-secondary);
            margin-right: 8px;
        }

        .search-input {
            border: none;
            padding: 12px 0;
            width: 100%;
            background: transparent;
        }

        .search-input:focus {
            outline: none;
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background-color: white;
            border: 1px solid var(--border-color);
            border-top: none;
            border-radius: 0 0 var(--radius-md) var(--radius-md);
            box-shadow: var(--card-shadow);
            max-height: 300px;
            overflow-y: auto;
            z-index: 50;
            display: none;
        }

        .search-result-item {
            padding: 12px 16px;
            cursor: pointer;
            transition: var(--transition-standard);
        }

        .search-result-item:hover {
            background-color: var(--secondary-color);
        }

        .search-result-item:not(:last-child) {
            border-bottom: 1px solid var(--border-color);
        }

        .filters-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .filter-options {
            display: flex;
            gap: 8px;
        }

        .filter-btn {
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: 8px 16px;
            cursor: pointer;
            transition: var(--transition-standard);
            font-weight: 500;
        }

        .filter-btn:hover {
            background-color: var(--secondary-color);
        }

        .filter-btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .date-filters {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        /* Forms */
        .payment-form {
            background-color: white;
            border-radius: var(--radius-md);
            padding: 24px;
            box-shadow: var(--card-shadow);
            max-width: 800px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            background-color: white;
            transition: var(--transition-standard);
            box-shadow: var(--input-shadow);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
        }

        .form-group input[readonly] {
            background-color: var(--secondary-color);
            cursor: not-allowed;
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 16px;
            margin-top: 24px;
        }

        .form-group.inline {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 0;
        }

        .form-group.inline label {
            margin-bottom: 0;
            white-space: nowrap;
        }

        .form-row {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
        }

        .form-row input {
            flex: 1;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            transition: var(--transition-standard);
            box-shadow: var(--input-shadow);
        }

        .form-row input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: var(--radius-md);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition-standard);
            border: none;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-hover);
        }

        .btn-secondary {
            background-color: white;
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background-color: var(--secondary-color);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 14px;
        }

        .btn svg {
            width: 18px;
            height: 18px;
        }

        /* Table Styles */
        .table-container {
            background-color: white;
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: var(--card-shadow);
            margin-bottom: 24px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            background-color: #f8fafc;
            text-align: left;
            padding: 16px;
            font-weight: 500;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .data-table td {
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
            vertical-align: middle;
        }

        .data-table tbody tr {
            transition: var(--transition-standard);
        }

        .data-table tbody tr:hover {
            background-color: rgba(0, 0, 0, 0.02);
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 12px;
            border-radius: 100px;
            font-size: 14px;
            font-weight: 500;
        }

        .status-pending {
            background-color: rgba(245, 158, 11, 0.1);
            color: var(--warning-color);
        }

        .status-completed {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success-color);
        }

        .status-overdue {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger-color);
        }

        .table-actions {
            display: flex;
            gap: 8px;
        }

        .action-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--secondary-color);
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition-standard);
        }

        .action-icon:hover {
            background-color: #e2e8f0;
            color: var(--primary-color);
        }

        /* Pagination */
        .pagination {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin-top: 24px;
        }

        .pagination-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: var(--radius-md);
            border: 1px solid var(--border-color);
            background-color: white;
            cursor: pointer;
            transition: var(--transition-standard);
        }

        .pagination-btn:hover:not(:disabled) {
            background-color: var(--secondary-color);
            color: var(--primary-color);
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page-info {
            color: var(--text-secondary);
        }

        /* Register Details */
        .register-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .details-section {
            background-color: white;
            border-radius: var(--radius-md);
            padding: 24px;
            box-shadow: var(--card-shadow);
        }

        .expense-form {
            margin-bottom: 16px;
        }

        .register-actions {
            display: flex;
            justify-content: flex-end;
            gap: 16px;
            margin-top: 32px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            padding: 24px;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.2s ease-in-out;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background-color: white;
            border-radius: var(--radius-lg);
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            animation: slideUp 0.3s ease-in-out;
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-header h3 {
            font-size: 20px;
            font-weight: 600;
        }

        .close-modal {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 24px;
            line-height: 1;
            color: var(--text-secondary);
            transition: var(--transition-standard);
        }

        .close-modal:hover {
            color: var(--danger-color);
        }

        .modal-body {
            padding: 24px;
            overflow-y: auto;
        }

        .modal-footer {
            padding: 16px 24px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 16px;
        }

        .register-summary {
            background-color: var(--secondary-color);
            border-radius: var(--radius-md);
            padding: 16px;
            margin: 16px 0;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 1000;
            transform: translateY(150%);
            transition: transform 0.3s ease;
        }

        .toast.active {
            transform: translateY(0);
        }

        .toast-content {
            display: flex;
            align-items: center;
            background-color: white;
            border-radius: var(--radius-md);
            padding: 16px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            min-width: 300px;
        }

        .toast-icon {
            width: 32px;
            height: 32px;
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
        }

        .toast-message {
            font-weight: 500;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .register-details {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                position: fixed;
                bottom: 0;
                top: auto;
                height: auto;
                border-right: none;
                border-top: 1px solid var(--border-color);
                z-index: 100;
                flex-direction: row;
                justify-content: space-around;
                padding: 12px 0;
            }
            
            .sidebar-collapsed .sidebar {
                width: 100%;
            }
            
            .logo-container, 
            .nav-item span,
            .sidebar-title {
                display: none;
            }
            
            .sidebar-nav {
                display: flex;
                padding: 0;
                overflow-x: auto;
            }
            
            .nav-item {
                padding: 8px;
                border-left: none;
                border-bottom: 3px solid transparent;
                flex-direction: column;
            }
            
            .nav-item.active {
                border-left: none;
                border-bottom: 3px solid var(--primary-color);
            }
            
            .nav-item svg {
                margin-right: 0;
            }
            
            .main-content {
                margin-left: 0;
                margin-bottom: 70px; /* Height of the bottom nav */
            }
            
            .sidebar-collapsed .main-content {
                margin-left: 0;
            }
            
            .toggle-sidebar {
                display: none;
            }
            
            .summary-cards {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 576px) {
            .main-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .date-user {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .filters-container {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .form-actions {
                flex-direction: column;
            }
            
            .form-actions .btn {
                width: 100%;
            }
            
            .form-row {
                flex-direction: column;
            }
            
            .modal {
                padding: 16px;
            }
        }

        /* Two-column layout for payment form */
        .payment-form-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .payment-form-columns {
                grid-template-columns: 1fr;
            }
        }
         /* Estilos para el registro de pagos a pantalla completa */
        .content-section#registro-pagos {
            display: flex;
            flex-direction: column;
            height: calc(100vh - 70px); /* Altura total menos el header */
        }

        .content-section#registro-pagos.active {
            display: flex;
        }

        .content-section#registro-pagos .search-container {
            flex-shrink: 0;
        }

        .content-section#registro-pagos .payment-form {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: auto;
        }

        .content-section#registro-pagos .payment-form-columns {
            flex: 1;
            overflow: auto;
        }

        .content-section#registro-pagos .form-actions {
            margin-top: auto;
            padding-top: 20px;
        }

        /* Estilos para el acorde√≥n de pagos */
        .payments-accordion {
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo-container">
                <div class="logo">SP</div>
                <h1 class="sidebar-title">Sistema de Pagos</h1>
            </div>
            <nav class="sidebar-nav">
                <button class="nav-item active" data-section="dashboard">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg>
                    Dashboard
                </button>
                <button class="nav-item" data-section="registro-pagos">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.07V12a10 10 0 1 1-5.93-9.14"/><polyline points="23 3 12 14 9 11"/></svg>
                    Registro de Pagos
                </button>
                <button class="nav-item" data-section="gestion-pagos">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
                    Gesti√≥n de Pagos
                </button>
                <button class="nav-item" data-section="cuadre-caja">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.91 8.84 8.56 2.23a1.93 1.93 0 0 0-1.81 0L3.1 4.13a2.12 2.12 0 0 0-.05 3.69l12.22 6.93a2 2 0 0 0 1.94 0L21 12.51a2.12 2.12 0 0 0-.09-3.67Z"/><path d="m3.09 8.84 12.35-6.61a1.93 1.93 0 0 1 1.81 0l3.65 1.9a2.12 2.12 0 0 1 .1 3.69L8.73 14.75a2 2 0 0 1-1.94 0L3 12.51a2.12 2.12 0 0 1 .09-3.67Z"/><line x1="12" y1="22" x2="12" y2="13"/><path d="M20 13.5v3.37a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13.5"/></svg>
                    Cuadre de Caja
                </button>
                <button class="nav-item" data-section="historial">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                    Historial
                </button>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header with user info and date -->
            <header class="main-header">
                <div class="date-user">
                    <div id="current-date" class="current-date"></div>
                    <div class="user-info">
                        <span>Usuario: Admin</span>
                    </div>
                </div>
                <button id="toggle-sidebar" class="toggle-sidebar">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
                </button>
            </header>

            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <h2 class="section-title">Dashboard</h2>
                <div class="summary-cards">
                    <div class="summary-card">
                        <div class="summary-icon pending-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                        </div>
                        <div class="summary-content">
                            <h3>Pagos Pendientes</h3>
                            <p id="pending-payments">15</p>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon completed-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.07V12a10 10 0 1 1-5.93-9.14"/><polyline points="23 3 12 14 9 11"/></svg>
                        </div>
                        <div class="summary-content">
                            <h3>Pagos Completados</h3>
                            <p id="completed-payments">42</p>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon total-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
                        </div>
                        <div class="summary-content">
                            <h3>Total Recaudado</h3>
                            <p id="total-collected">$8,750.00</p>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon balance-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
                        </div>
                        <div class="summary-content">
                            <h3>Balance de Caja</h3>
                            <p id="cash-balance">$1,230.00</p>
                        </div>
                    </div>
                </div>

                <div class="recent-activity">
                    <h3 class="subsection-title">Actividad Reciente</h3>
                    <div class="activity-list">
                        <div class="activity-item">
                            <div class="activity-icon payment-received">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>
                            </div>
                            <div class="activity-content">
                                <p class="activity-title">Pago recibido</p>
                                <p class="activity-details">Mar√≠a Rodr√≠guez - Pr√©stamo #12345</p>
                            </div>
                            <div class="activity-amount">$150.00</div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon payment-received">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>
                            </div>
                            <div class="activity-content">
                                <p class="activity-title">Pago recibido</p>
                                <p class="activity-details">Juan P√©rez - Pr√©stamo #12346</p>
                            </div>
                            <div class="activity-amount">$200.00</div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon payment-overdue">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
                            </div>
                            <div class="activity-content">
                                <p class="activity-title">Pago vencido</p>
                                <p class="activity-details">Ana G√≥mez - Pr√©stamo #12347</p>
                            </div>
                            <div class="activity-amount">$175.00</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Registro de Pagos Section -->
            <section id="registro-pagos" class="content-section">
                <h2 class="section-title">Registro de Pagos</h2>
                <div class="search-container">
                    <div class="search-box">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                        <input type="text" id="cliente-search" class="search-input" placeholder="Buscar cliente..." autocomplete="off">
                        <div id="search-results" class="search-results"></div>
                    </div>
                </div>

                <form id="payment-form" class="payment-form">
                    <div class="payment-form-columns">
                        <div class="column">
                            <div class="form-group">
                                <label for="client-name">Nombre del Cliente</label>
                                <input type="text" id="client-name" name="client-name" readonly>
                            </div>
                            <div class="form-group">
                                <label for="loan-number">N√∫mero de Pr√©stamo</label>
                                <input type="text" id="loan-number" name="loan-number" readonly>
                            </div>
                            <div class="form-group">
                                <label for="payment-amount">Monto a Pagar</label>
                                <input type="number" id="payment-amount" name="payment-amount" step="0.01" readonly>
                            </div>
                            <div class="form-group">
                                <label for="amount-given">Monto Entregado</label>
                                <input type="number" id="amount-given" name="amount-given" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="change-amount">Cambio</label>
                                <input type="number" id="change-amount" name="change-amount" step="0.01" readonly>
                            </div>
                        </div>
                        <div class="column">
                            <div class="form-group">
                                <label for="payment-date">Fecha de Pago</label>
                                <input type="date" id="payment-date" name="payment-date" required>
                            </div>
                            <div class="form-group">
                                <label for="payment-method">M√©todo de Pago</label>
                                <select id="payment-method" name="payment-method" required>
                                    <option value="">Seleccionar m√©todo</option>
                                    <option value="efectivo">Efectivo</option>
                                    <option value="transferencia">Transferencia</option>
                                    <option value="cheque">Cheque</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="payment-notes">Notas</label>
                                <textarea id="payment-notes" name="payment-notes"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" id="cancel-payment" class="btn btn-secondary">Cancelar</button>
                        <button type="submit" id="submit-payment" class="btn btn-primary">Registrar Pago</button>
                    </div>
                </form>
            </section>

            <!-- Gesti√≥n de Pagos Section -->
            <section id="gestion-pagos" class="content-section">
                <h2 class="section-title">Gesti√≥n de Pagos</h2>
                <div class="filters-container">
                    <div class="search-box wide-search">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                        <input type="text" id="payment-search" class="search-input" placeholder="Buscar por cliente o n√∫mero de pr√©stamo...">
                    </div>
                    <div class="filter-options">
                        <button class="filter-btn active" data-filter="all">Todos</button>
                        <button class="filter-btn" data-filter="pending">Pendientes</button>
                        <button class="filter-btn" data-filter="completed">Completados</button>
                    </div>
                </div>

                <div class="table-container">
                    <table id="payments-table" class="data-table">
                        <thead>
                            <tr>
                                <th>Cliente</th>
                                <th>Pr√©stamo</th>
                                <th>Fecha</th>
                                <th>Monto</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Payment rows will be added dynamically -->
                        </tbody>
                    </table>
                </div>

                <div class="pagination">
                    <button id="prev-page" class="pagination-btn" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg>
                        Anterior
                    </button>
                    <span id="page-info">P√°gina 1 de 1</span>
                    <button id="next-page" class="pagination-btn" disabled>
                        Siguiente
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
                    </button>
                </div>
            </section>

            <!-- Cuadre de Caja Section -->
            <section id="cuadre-caja" class="content-section">
                <h2 class="section-title">Cuadre de Caja</h2>
                
                <div class="cash-register-summary">
                    <div class="summary-card full-width">
                        <div class="summary-header">
                            <h3>Resumen del D√≠a</h3>
                            <div id="register-date" class="register-date"></div>
                        </div>
                        <div class="summary-body">
                            <div class="summary-row">
                                <span>Saldo Inicial:</span>
                                <span id="initial-balance">$1,000.00</span>
                            </div>
                            <div class="summary-row">
                                <span>Total Ingresos:</span>
                                <span id="total-income">$2,450.00</span>
                            </div>
                            <div class="summary-row">
                                <span>Total Gastos:</span>
                                <span id="total-expenses">$220.00</span>
                            </div>
                            <div class="summary-row total">
                                <span>Saldo Esperado:</span>
                                <span id="expected-balance">$3,230.00</span>
                            </div>
                            <div class="summary-row">
                                <span>Saldo Real (Conteo):</span>
                                <input type="number" id="actual-balance" class="balance-input" step="0.01">
                            </div>
                            <div class="summary-row difference">
                                <span>Diferencia:</span>
                                <span id="balance-difference">$0.00</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="register-details">
                    <div class="details-section">
                        <h3 class="subsection-title">Desglose de Ingresos</h3>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Hora</th>
                                        <th>Cliente</th>
                                        <th>Pr√©stamo</th>
                                        <th>M√©todo</th>
                                        <th>Monto</th>
                                    </tr>
                                </thead>
                                <tbody id="income-table">
                                    <!-- Income rows will be populated dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="details-section">
                        <h3 class="subsection-title">Desglose de Gastos</h3>
                        <div class="expense-form">
                            <div class="form-row">
                                <input type="text" id="expense-description" placeholder="Descripci√≥n del gasto">
                                <input type="number" id="expense-amount" placeholder="Monto" step="0.01">
                                <button id="add-expense" class="btn btn-small">Agregar</button>
                            </div>
                        </div>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Hora</th>
                                        <th>Descripci√≥n</th>
                                        <th>Monto</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="expense-table">
                                    <!-- Expense rows will be populated dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="register-actions">
                    <button id="print-report" class="btn btn-secondary">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect x="6" y="14" width="12" height="8"/></svg>
                        Imprimir Reporte
                    </button>
                    <button id="close-register" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                        Cerrar Caja
                    </button>
                </div>
            </section>

            <!-- Historial Section -->
            <section id="historial" class="content-section">
                <h2 class="section-title">Historial de Cierres</h2>
                
                <div class="filters-container">
                    <div class="date-filters">
                        <div class="form-group inline">
                            <label for="start-date">Desde:</label>
                            <input type="date" id="start-date">
                        </div>
                        <div class="form-group inline">
                            <label for="end-date">Hasta:</label>
                            <input type="date" id="end-date">
                        </div>
                        <button id="filter-dates" class="btn btn-small">Filtrar</button>
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Fecha</th>
                                <th>Total Ingresos</th>
                                <th>Total Gastos</th>
                                <th>Saldo Final</th>
                                <th>Diferencia</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="history-table">
                            <!-- History rows will be populated dynamically -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <!-- Modals -->
    <div id="payment-detail-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Detalle de Pago</h3>
                <button class="close-modal">√ó</button>
            </div>
            <div class="modal-body" id="payment-detail-body">
                <!-- Payment details will be populated dynamically -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary close-modal">Cerrar</button>
            </div>
        </div>
    </div>

    <div id="register-close-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirmar Cierre de Caja</h3>
                <button class="close-modal">√ó</button>
            </div>
            <div class="modal-body">
                <p>¬øEst√° seguro que desea cerrar la caja del d√≠a?</p>
                <div class="register-summary" id="closing-summary">
                    <!-- Closing summary will be populated dynamically -->
                </div>
                <div class="form-group">
                    <label for="close-notes">Notas de cierre:</label>
                    <textarea id="close-notes"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary close-modal">Cancelar</button>
                <button id="confirm-close" class="btn btn-primary">Confirmar Cierre</button>
            </div>
        </div>
    </div>

    <div id="toast" class="toast">
        <div class="toast-content">
            <div class="toast-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.07V12a10 10 0 1 1-5.93-9.14"/><polyline points="23 3 12 14 9 11"/></svg>
            </div>
            <div class="toast-message">Operaci√≥n completada con √©xito</div>
        </div>
    </div>

    <script>
        // DOM Elements
        document.addEventListener('DOMContentLoaded', () => {
            // Navigation
            const navItems = document.querySelectorAll('.nav-item');
            const contentSections = document.querySelectorAll('.content-section');
            const toggleSidebarBtn = document.getElementById('toggle-sidebar');
            const appContainer = document.querySelector('.app-container');
            
            // Set current date in the header
            const currentDateElement = document.getElementById('current-date');
            const registerDateElement = document.getElementById('register-date');
            
            const currentDate = new Date();
            const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            
            if (currentDateElement) {
                currentDateElement.textContent = currentDate.toLocaleDateString('es-ES', dateOptions);
            }
            
            if (registerDateElement) {
                registerDateElement.textContent = currentDate.toLocaleDateString('es-ES', dateOptions);
            }
            
            // Set today's date in the payment form
            const paymentDateInput = document.getElementById('payment-date');
            if (paymentDateInput) {
                paymentDateInput.valueAsDate = new Date();
            }
            
            // Navigation functionality
            navItems.forEach(item => {
                item.addEventListener('click', () => {
                    const targetSection = item.getAttribute('data-section');
                    
                    // Update active nav item
                    navItems.forEach(nav => nav.classList.remove('active'));
                    item.classList.add('active');
                    
                    // Show corresponding section
                    contentSections.forEach(section => {
                        section.classList.remove('active');
                        if (section.id === targetSection) {
                            section.classList.add('active');
                        }
                    });
                });
            });
            
            // Toggle sidebar
            if (toggleSidebarBtn) {
                toggleSidebarBtn.addEventListener('click', () => {
                    appContainer.classList.toggle('sidebar-collapsed');
                });
            }
            
            // Sample data for clients and loans
            const clients = [
                { id: 1, name: 'Mar√≠a Rodr√≠guez', loans: [{ id: 12345, amount: 5000, balance: 3500, nextPayment: 150 }] },
                { id: 2, name: 'Juan P√©rez', loans: [{ id: 12346, amount: 3000, balance: 2400, nextPayment: 200 }] },
                { id: 3, name: 'Ana G√≥mez', loans: [{ id: 12347, amount: 7000, balance: 6300, nextPayment: 175 }] },
                { id: 4, name: 'Carlos S√°nchez', loans: [{ id: 12348, amount: 2500, balance: 1500, nextPayment: 125 }] },
                { id: 5, name: 'Laura Mart√≠nez', loans: [{ id: 12349, amount: 10000, balance: 9000, nextPayment: 300 }] },
            ];
            
            // Sample payments data
            const payments = [
                { id: 1, clientId: 1, loanId: 12345, date: '2023-09-15', amount: 150, status: 'completed' },
                { id: 2, clientId: 2, loanId: 12346, date: '2023-09-15', amount: 200, status: 'completed' },
                { id: 3, clientId: 3, loanId: 12347, date: '2023-09-10', amount: 175, status: 'completed' },
                { id: 4, clientId: 4, loanId: 12348, date: '2023-09-20', amount: 125, status: 'pending' },
                { id: 5, clientId: 5, loanId: 12349, date: '2023-09-25', amount: 300, status: 'pending' },
                { id: 6, clientId: 1, loanId: 12345, date: '2023-10-15', amount: 150, status: 'pending' },
                { id: 7, clientId: 2, loanId: 12346, date: '2023-10-15', amount: 200, status: 'pending' },
                { id: 8, clientId: 3, loanId: 12347, date: '2023-10-10', amount: 175, status: 'pending' },
            ];
            
            // Sample expenses
            const expenses = [
                { id: 1, date: '2023-09-15', time: '09:30', description: 'Papeler√≠a', amount: 50 },
                { id: 2, date: '2023-09-15', time: '14:15', description: 'Caf√© para oficina', amount: 20 },
                { id: 3, date: '2023-09-15', time: '16:45', description: 'Transporte', amount: 150 },
            ];
            
            // Sample history data
            const historyData = [
                { date: '2023-09-14', income: 2200, expenses: 180, finalBalance: 2020, difference: 0, status: 'balanced' },
                { date: '2023-09-13', income: 1800, expenses: 220, finalBalance: 1580, difference: -50, status: 'shortfall' },
                { date: '2023-09-12', income: 2500, expenses: 150, finalBalance: 2350, difference: 20, status: 'surplus' },
            ];
            
            // Search functionality
            const clientSearch = document.getElementById('cliente-search');
            const searchResults = document.getElementById('search-results');
            const clientName = document.getElementById('client-name');
            const loanNumber = document.getElementById('loan-number');
            const paymentAmount = document.getElementById('payment-amount');
            const amountGiven = document.getElementById('amount-given');
            const changeAmount = document.getElementById('change-amount');
            
            if (clientSearch) {
                clientSearch.addEventListener('input', (e) => {
                    const searchTerm = e.target.value.toLowerCase();
                    
                    if (searchTerm.length < 2) {
                        searchResults.style.display = 'none';
                        return;
                    }
                    
                    // Filter clients based on search term
                    const filteredClients = clients.filter(client => 
                        client.name.toLowerCase().includes(searchTerm)
                    );
                    
                    // Display search results
                    if (filteredClients.length > 0) {
                        searchResults.innerHTML = '';
                        filteredClients.forEach(client => {
                            client.loans.forEach(loan => {
                                const resultItem = document.createElement('div');
                                resultItem.classList.add('search-result-item');
                                resultItem.innerHTML = `
                                    <div>${client.name}</div>
                                    <div>Pr√©stamo #${loan.id} - Balance: $${loan.balance}</div>
                                `;
                                
                                resultItem.addEventListener('click', () => {
                                    clientName.value = client.name;
                                    loanNumber.value = loan.id;
                                    paymentAmount.value = loan.nextPayment;
                                    amountGiven.value = '';
                                    changeAmount.value = '';
                                    searchResults.style.display = 'none';
                                    clientSearch.value = client.name;
                                });
                                
                                searchResults.appendChild(resultItem);
                            });
                        });
                        
                        searchResults.style.display = 'block';
                    } else {
                        searchResults.innerHTML = `<div class="search-result-item">No se encontraron resultados</div>`;
                        searchResults.style.display = 'block';
                    }
                });
                
                // Close search results when clicking outside
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.search-box')) {
                        searchResults.style.display = 'none';
                    }
                });
            }
            
            // Calculate change when amount given changes
            if (amountGiven) {
                amountGiven.addEventListener('input', () => {
                    const amount = parseFloat(paymentAmount.value) || 0;
                    const given = parseFloat(amountGiven.value) || 0;
                    
                    if (given >= amount) {
                        changeAmount.value = (given - amount).toFixed(2);
                    } else {
                        changeAmount.value = '0.00';
                    }
                });
            }
            
            // Payment Form Submission
            const paymentForm = document.getElementById('payment-form');
            
            if (paymentForm) {
                paymentForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    // Validate and process form data
                    const clientNameValue = clientName.value;
                    const loanNumberValue = loanNumber.value;
                    const paymentAmountValue = paymentAmount.value;
                    const amountGivenValue = amountGiven.value;
                    const paymentDate = document.getElementById('payment-date').value;
                    const paymentMethod = document.getElementById('payment-method').value;
                    const paymentNotes = document.getElementById('payment-notes').value;
                    
                    if (!clientNameValue || !loanNumberValue || !paymentAmountValue || !amountGivenValue || !paymentDate || !paymentMethod) {
                        showToast('Por favor complete todos los campos requeridos', 'error');
                        return;
                    }
                    
                    if (parseFloat(amountGivenValue) < parseFloat(paymentAmountValue)) {
                        showToast('El monto entregado debe ser mayor o igual al monto a pagar', 'error');
                        return;
                    }
                    
                    // Create payment object and add to payments array
                    const newPayment = {
                        id: payments.length + 1,
                        clientId: clients.find(c => c.name === clientNameValue).id,
                        loanId: parseInt(loanNumberValue),
                        date: paymentDate,
                        amount: parseFloat(paymentAmountValue),
                        amountGiven: parseFloat(amountGivenValue),
                        change: parseFloat(changeAmount.value),
                        status: 'completed',
                        method: paymentMethod,
                        notes: paymentNotes,
                        time: new Date().toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' })
                    };
                    
                    payments.push(newPayment);
                    
                    // Add to income table for today's register
                    addToIncomeTable(newPayment);
                    
                    // Update payment tables
                    populatePaymentsTable();
                    
                    // Reset form
                    paymentForm.reset();
                    
                    // Show success message
                    showToast('Pago registrado correctamente');
                    
                    // Navigate to payments management section
                    const paymentManagementNav = document.querySelector('.nav-item[data-section="gestion-pagos"]');
                    paymentManagementNav.click();
                });
                
                // Cancel button functionality
                const cancelButton = document.getElementById('cancel-payment');
                if (cancelButton) {
                    cancelButton.addEventListener('click', () => {
                        paymentForm.reset();
                        showToast('Formulario cancelado', 'warning');
                    });
                }
            }
            
            // Payments Table Population
            const paymentFilters = document.querySelectorAll('.filter-btn');
            const paymentSearch = document.getElementById('payment-search');
            
            let currentFilter = 'all';
            
            // Populate payments table based on filters
            function populatePaymentsTable() {
                const paymentsTable = document.querySelector('#payments-table tbody');
                
                if (!paymentsTable) return;
                
                // Filter payments based on current filter
                let filteredPayments = [...payments];
                
                if (currentFilter !== 'all') {
                    filteredPayments = payments.filter(payment => payment.status === currentFilter);
                }
                
                // Apply search filter if search input exists and has value
                if (paymentSearch && paymentSearch.value.trim() !== '') {
                    const searchTerm = paymentSearch.value.toLowerCase();
                    
                    filteredPayments = filteredPayments.filter(payment => {
                        const client = clients.find(c => c.id === payment.clientId);
                        return client.name.toLowerCase().includes(searchTerm) || 
                               payment.loanId.toString().includes(searchTerm);
                    });
                }
                
                // Clear table
                paymentsTable.innerHTML = '';
                
                // Add payments to table
                if (filteredPayments.length === 0) {
                    paymentsTable.innerHTML = `
                        <tr>
                            <td colspan="6" class="text-center">No hay pagos que mostrar</td>
                        </tr>
                    `;
                    return;
                }
                
                filteredPayments.forEach(payment => {
                    const client = clients.find(c => c.id === payment.clientId);
                    
                    const row = document.createElement('tr');
                    
                    const statusClass = payment.status === 'completed' ? 'status-completed' : 'status-pending';
                    const statusText = payment.status === 'completed' ? 'Completado' : 'Pendiente';
                    
                    row.innerHTML = `
                        <td>${client ? client.name : 'Cliente desconocido'}</td>
                        <td>#${payment.loanId}</td>
                        <td>${formatDate(payment.date)}</td>
                        <td>$${payment.amount.toFixed(2)}</td>
                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                        <td>
                            <div class="table-actions">
                                <button class="action-icon view-payment" data-id="${payment.id}">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                                </button>
                                ${payment.status === 'pending' ? `
                                    <button class="action-icon complete-payment" data-id="${payment.id}">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.07V12a10 10 0 1 1-5.93-9.14"/><polyline points="23 3 12 14 9 11"/></svg>
                                    </button>
                                ` : ''}
                            </div>
                        </td>
                    `;
                    
                    paymentsTable.appendChild(row);
                });
                
                // Add event listeners to action buttons
                addPaymentActionListeners();
            }
            
            // Update payment action listeners
            function addPaymentActionListeners() {
                // View payment details
                document.querySelectorAll('.view-payment').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const paymentId = parseInt(btn.getAttribute('data-id'));
                        showPaymentDetails(paymentId);
                    });
                });
                
                // Complete payment
                document.querySelectorAll('.complete-payment').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const paymentId = parseInt(btn.getAttribute('data-id'));
                        completePayment(paymentId);
                    });
                });
            }
            
            // Show payment details modal
            function showPaymentDetails(paymentId) {
                const payment = payments.find(p => p.id === paymentId);
                if (!payment) return;
                
                const client = clients.find(c => c.id === payment.clientId);
                const loan = client ? client.loans.find(l => l.id === payment.loanId) : null;
                
                const modal = document.getElementById('payment-detail-modal');
                const modalBody = document.getElementById('payment-detail-body');
                
                modalBody.innerHTML = `
                    <div class="detail-content">
                        <div class="detail-row">
                            <span class="detail-label">Cliente:</span>
                            <span class="detail-value">${client ? client.name : 'Cliente desconocido'}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Pr√©stamo:</span>
                            <span class="detail-value">#${payment.loanId}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Monto:</span>
                            <span class="detail-value">$${payment.amount.toFixed(2)}</span>
                        </div>
                        ${payment.amountGiven ? `
                        <div class="detail-row">
                            <span class="detail-label">Monto Entregado:</span>
                            <span class="detail-value">$${payment.amountGiven.toFixed(2)}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Cambio:</span>
                            <span class="detail-value">$${payment.change ? payment.change.toFixed(2) : '0.00'}</span>
                        </div>
                        ` : ''}
                        <div class="detail-row">
                            <span class="detail-label">Fecha:</span>
                            <span class="detail-value">${formatDate(payment.date)}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Estado:</span>
                            <span class="detail-value">
                                <span class="status-badge ${payment.status === 'completed' ? 'status-completed' : 'status-pending'}">
                                    ${payment.status === 'completed' ? 'Completado' : 'Pendiente'}
                                </span>
                            </span>
                        </div>
                        ${payment.method ? `
                        <div class="detail-row">
                            <span class="detail-label">M√©todo de Pago:</span>
                            <span class="detail-value">${
                                payment.method === 'efectivo' ? 'Efectivo' : 
                                payment.method === 'transferencia' ? 'Transferencia' : 
                                payment.method === 'cheque' ? 'Cheque' : payment.method
                            }</span>
                        </div>` : ''}
                        ${loan ? `
                        <div class="detail-row">
                            <span class="detail-label">Monto Original:</span>
                            <span class="detail-value">$${loan.amount.toFixed(2)}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Balance Actual:</span>
                            <span class="detail-value">$${loan.balance.toFixed(2)}</span>
                        </div>` : ''}
                        ${payment.notes ? `
                        <div class="detail-row">
                            <span class="detail-label">Notas:</span>
                            <span class="detail-value">${payment.notes}</span>
                        </div>` : ''}
                    </div>
                `;
                
                // Show modal
                modal.classList.add('active');
                
                // Close modal functionality
                const closeButtons = modal.querySelectorAll('.close-modal');
                closeButtons.forEach(btn => {
                    btn.addEventListener('click', () => {
                        modal.classList.remove('active');
                    });
                });
            }
            
            // Complete a pending payment
            function completePayment(paymentId) {
                const payment = payments.find(p => p.id === paymentId);
                if (!payment || payment.status === 'completed') return;
                
                // Update payment status
                payment.status = 'completed';
                payment.method = 'efectivo'; // Default to cash
                payment.time = new Date().toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
                
                // Add to income table for today
                addToIncomeTable(payment);
                
                // Refresh payments table
                populatePaymentsTable();
                
                // Show success message
                showToast('Pago marcado como completado');
            }
            
            // Add payment to income table
            function addToIncomeTable(payment) {
                const incomeTable = document.getElementById('income-table');
                if (!incomeTable) return;
                
                const client = clients.find(c => c.id === payment.clientId);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${payment.time || new Date().toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' })}</td>
                    <td>${client ? client.name : 'Cliente desconocido'}</td>
                    <td>#${payment.loanId}</td>
                    <td>${payment.method ? (
                        payment.method === 'efectivo' ? 'Efectivo' : 
                        payment.method === 'transferencia' ? 'Transferencia' : 
                        payment.method === 'cheque' ? 'Cheque' : payment.method
                    ) : 'Efectivo'}</td>
                    <td>$${payment.amount.toFixed(2)}</td>
                `;
                
                incomeTable.appendChild(row);
                
                // Update total income and balances
                updateCashRegisterSummary();
            }
            
            // Cash Register Functionality
            function updateCashRegisterSummary() {
                const initialBalance = document.getElementById('initial-balance');
                const totalIncome = document.getElementById('total-income');
                const totalExpenses = document.getElementById('total-expenses');
                const expectedBalance = document.getElementById('expected-balance');
                const actualBalance = document.getElementById('actual-balance');
                const balanceDifference = document.getElementById('balance-difference');
                
                // Calculate totals
                if (!initialBalance || !totalIncome || !totalExpenses || !expectedBalance) return;
                
                // Parse current values
                const initialValue = parseFloat(initialBalance.textContent.replace(/[$,]/g, '')) || 0;
                
                // Calculate income from table
                const incomeRows = document.querySelectorAll('#income-table tr');
                let incomeTotal = 0;
                
                incomeRows.forEach(row => {
                    const amountCell = row.cells[4];
                    if (amountCell) {
                        const amount = parseFloat(amountCell.textContent.replace(/[$,]/g, '')) || 0;
                        incomeTotal += amount;
                    }
                });
                
                // Calculate expenses from table
                const expenseRows = document.querySelectorAll('#expense-table tr');
                let expenseTotal = 0;
                
                expenseRows.forEach(row => {
                    const amountCell = row.cells[2];
                    if (amountCell) {
                        const amount = parseFloat(amountCell.textContent.replace(/[$,]/g, '')) || 0;
                        expenseTotal += amount;
                    }
                });
                
                // Update summary
                totalIncome.textContent = `$${incomeTotal.toFixed(2)}`;
                totalExpenses.textContent = `$${expenseTotal.toFixed(2)}`;
                
                const expected = initialValue + incomeTotal - expenseTotal;
                expectedBalance.textContent = `$${expected.toFixed(2)}`;
                
                // Calculate difference if actual balance is entered
                if (actualBalance && actualBalance.value) {
                    const actual = parseFloat(actualBalance.value) || 0;
                    const difference = actual - expected;
                    
                    balanceDifference.textContent = `$${difference.toFixed(2)}`;
                    
                    if (difference < 0) {
                        balanceDifference.style.color = 'var(--danger-color)';
                    } else if (difference > 0) {
                        balanceDifference.style.color = 'var(--success-color)';
                    } else {
                        balanceDifference.style.color = 'inherit';
                    }
                }
            }
            
            // Expense functionality
            const addExpenseBtn = document.getElementById('add-expense');
            const expenseDescription = document.getElementById('expense-description');
            const expenseAmount = document.getElementById('expense-amount');
            
            if (addExpenseBtn && expenseDescription && expenseAmount) {
                addExpenseBtn.addEventListener('click', () => {
                    if (!expenseDescription.value || !expenseAmount.value) {
                        showToast('Por favor complete la descripci√≥n y el monto', 'error');
                        return;
                    }
                    
                    const amount = parseFloat(expenseAmount.value);
                    if (isNaN(amount) || amount <= 0) {
                        showToast('El monto debe ser un n√∫mero positivo', 'error');
                        return;
                    }
                    
                    // Add expense
                    const newExpense = {
                        id: expenses.length + 1,
                        date: new Date().toISOString().split('T')[0],
                        time: new Date().toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' }),
                        description: expenseDescription.value,
                        amount: amount
                    };
                    
                    expenses.push(newExpense);
                    
                    // Add to expense table
                    addToExpenseTable(newExpense);
                    
                    // Clear inputs
                    expenseDescription.value = '';
                    expenseAmount.value = '';
                    
                    showToast('Gasto registrado correctamente');
                });
            }
            
            // Add expense to table
            function addToExpenseTable(expense) {
                const expenseTable = document.getElementById('expense-table');
                if (!expenseTable) return;
                
                const row = document.createElement('tr');
                row.dataset.id = expense.id;
                
                row.innerHTML = `
                    <td>${expense.time}</td>
                    <td>${expense.description}</td>
                    <td>$${expense.amount.toFixed(2)}</td>
                    <td>
                        <div class="table-actions">
                            <button class="action-icon delete-expense" data-id="${expense.id}">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>
                            </button>
                        </div>
                    </td>
                `;
                
                expenseTable.appendChild(row);
                
                // Add delete functionality
                row.querySelector('.delete-expense').addEventListener('click', (e) => {
                    const id = parseInt(e.currentTarget.getAttribute('data-id'));
                    deleteExpense(id);
                });
                
                // Update register summary
                updateCashRegisterSummary();
            }
            
            // Delete expense
            function deleteExpense(id) {
                // Remove from data
                const expenseIndex = expenses.findIndex(e => e.id === id);
                if (expenseIndex !== -1) {
                    expenses.splice(expenseIndex, 1);
                }
                
                // Remove from table
                const row = document.querySelector(`#expense-table tr[data-id="${id}"]`);
                if (row) {
                    row.remove();
                }
                
                // Update register summary
                updateCashRegisterSummary();
                
                showToast('Gasto eliminado correctamente');
            }
            
            // Cash register close functionality
            const closeRegisterBtn = document.getElementById('close-register');
            
            if (closeRegisterBtn) {
                closeRegisterBtn.addEventListener('click', () => {
                    // Validate actual balance is entered
                    const actualBalance = document.getElementById('actual-balance');
                    if (!actualBalance || !actualBalance.value) {
                        showToast('Por favor ingrese el saldo real contado', 'error');
                        return;
                    }
                    
                    // Show confirmation modal
                    const modal = document.getElementById('register-close-modal');
                    const closingSummary = document.getElementById('closing-summary');
                    
                    if (modal && closingSummary) {
                        // Populate summary
                        const initialBalance = document.getElementById('initial-balance').textContent;
                        const totalIncome = document.getElementById('total-income').textContent;
                        const totalExpenses = document.getElementById('total-expenses').textContent;
                        const expectedBalance = document.getElementById('expected-balance').textContent;
                        const actual = actualBalance.value;
                        const difference = document.getElementById('balance-difference').textContent;
                        
                        closingSummary.innerHTML = `
                            <div class="summary-row"><span>Saldo Inicial:</span> <span>${initialBalance}</span></div>
                            <div class="summary-row"><span>Total Ingresos:</span> <span>${totalIncome}</span></div>
                            <div class="summary-row"><span>Total Gastos:</span> <span>${totalExpenses}</span></div>
                            <div class="summary-row total"><span>Saldo Esperado:</span> <span>${expectedBalance}</span></div>
                            <div class="summary-row"><span>Saldo Real:</span> <span>$${parseFloat(actual).toFixed(2)}</span></div>
                            <div class="summary-row difference"><span>Diferencia:</span> <span>${difference}</span></div>
                        `;
                        
                        modal.classList.add('active');
                        
                        // Close functionality
                        const closeButtons = modal.querySelectorAll('.close-modal');
                        closeButtons.forEach(btn => {
                            btn.addEventListener('click', () => {
                                modal.classList.remove('active');
                            });
                        });
                        
                        // Confirm close functionality
                        const confirmBtn = document.getElementById('confirm-close');
                        if (confirmBtn) {
                            confirmBtn.addEventListener('click', () => {
                                // Get closing notes
                                const notes = document.getElementById('close-notes').value;
                                
                                // Add to history
                                const newEntry = {
                                    date: new Date().toISOString().split('T')[0],
                                    income: parseFloat(totalIncome.replace(/[$,]/g, '')),
                                    expenses: parseFloat(totalExpenses.replace(/[$,]/g, '')),
                                    finalBalance: parseFloat(actual),
                                    difference: parseFloat(difference.replace(/[$,]/g, '')),
                                    status: parseFloat(difference.replace(/[$,]/g, '')) < 0 ? 'shortfall' : 
                                            parseFloat(difference.replace(/[$,]/g, '')) > 0 ? 'surplus' : 'balanced',
                                    notes: notes
                                };
                                
                                historyData.unshift(newEntry);
                                
                                // Update history table
                                populateHistoryTable();
                                
                                // Reset register
                                resetRegister();
                                
                                // Close modal
                                modal.classList.remove('active');
                                
                                // Show success message
                                showToast('Caja cerrada correctamente');
                                
                                // Navigate to history section
                                const historyNav = document.querySelector('.nav-item[data-section="historial"]');
                                historyNav.click();
                            });
                        }
                    }
                });
            }
            
            // Reset register after closing
            function resetRegister() {
                // Clear income and expense tables
                const incomeTable = document.getElementById('income-table');
                const expenseTable = document.getElementById('expense-table');
                
                if (incomeTable) incomeTable.innerHTML = '';
                if (expenseTable) expenseTable.innerHTML = '';
                
                // Reset actual balance input
                const actualBalance = document.getElementById('actual-balance');
                if (actualBalance) actualBalance.value = '';
                
                // Update summary
                document.getElementById('total-income').textContent = '$0.00';
                document.getElementById('total-expenses').textContent = '$0.00';
                document.getElementById('expected-balance').textContent = document.getElementById('initial-balance').textContent;
                document.getElementById('balance-difference').textContent = '$0.00';
                document.getElementById('balance-difference').style.color = 'inherit';
            }
            
            // Print register report
            const printReportBtn = document.getElementById('print-report');
            
            if (printReportBtn) {
                printReportBtn.addEventListener('click', () => {
                    window.print();
                });
            }
            
            // Populate history table
            function populateHistoryTable() {
                const historyTable = document.getElementById('history-table');
                if (!historyTable) return;
                
                // Clear table
                historyTable.innerHTML = '';
                
                // Add data
                historyData.forEach(entry => {
                    const row = document.createElement('tr');
                    
                    const statusClass = entry.status === 'balanced' ? 'status-completed' : 
                                       entry.status === 'surplus' ? 'status-completed' : 'status-overdue';
                    
                    const statusText = entry.status === 'balanced' ? 'Cuadrado' : 
                                      entry.status === 'surplus' ? 'Sobrante' : 'Faltante';
                    
                    row.innerHTML = `
                        <td>${formatDate(entry.date)}</td>
                        <td>$${entry.income.toFixed(2)}</td>
                        <td>$${entry.expenses.toFixed(2)}</td>
                        <td>$${entry.finalBalance.toFixed(2)}</td>
                        <td>$${Math.abs(entry.difference).toFixed(2)}</td>
                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                        <td>
                            <div class="table-actions">
                                <button class="action-icon view-history" data-date="${entry.date}">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                                </button>
                            </div>
                        </td>
                    `;
                    
                    historyTable.appendChild(row);
                });
            }
            
            // Initialization function for cash register page
            function initRegister() {
                // Set initial values
                const initialBalance = document.getElementById('initial-balance');
                const totalIncome = document.getElementById('total-income');
                const totalExpenses = document.getElementById('total-expenses');
                const expectedBalance = document.getElementById('expected-balance');
                const actualBalance = document.getElementById('actual-balance');
                
                if (initialBalance && totalIncome && totalExpenses && expectedBalance && actualBalance) {
                    // Initial setup
                    totalIncome.textContent = '$0.00';
                    totalExpenses.textContent = '$0.00';
                    
                    // Calculate expected balance
                    const initial = parseFloat(initialBalance.textContent.replace(/[$,]/g, '')) || 0;
                    expectedBalance.textContent = `$${initial.toFixed(2)}`;
                    
                    // Listen for changes to actual balance
                    actualBalance.addEventListener('input', updateCashRegisterSummary);
                }
                
                // Populate sample expenses
                expenses.forEach(expense => {
                    addToExpenseTable(expense);
                });
            }
            
            // Filter payments by status
            if (paymentFilters) {
                paymentFilters.forEach(filter => {
                    filter.addEventListener('click', () => {
                        paymentFilters.forEach(f => f.classList.remove('active'));
                        filter.classList.add('active');
                        
                        currentFilter = filter.getAttribute('data-filter');
                        populatePaymentsTable();
                    });
                });
            }
            
            // Search payments
            if (paymentSearch) {
                paymentSearch.addEventListener('input', () => {
                    populatePaymentsTable();
                });
            }
            
            // Initialize pages
            populatePaymentsTable();
            initRegister();
            populateHistoryTable();
            
            // Actual balance input formatting
            const actualBalanceInput = document.getElementById('actual-balance');
            if (actualBalanceInput) {
                actualBalanceInput.addEventListener('input', (e) => {
                    // Ensure it's a valid number
                    const value = e.target.value;
                    if (value && isNaN(value)) {
                        e.target.value = value.replace(/[^0-9.]/g, '');
                    }
                });
            }
            
            // Toast notifications
            function showToast(message, type = 'success') {
                const toast = document.getElementById('toast');
                const toastIcon = toast.querySelector('.toast-icon');
                const toastMessage = toast.querySelector('.toast-message');
                
                // Set message
                toastMessage.textContent = message;
                
                // Set icon based on type
                if (type === 'success') {
                    toastIcon.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.07V12a10 10 0 1 1-5.93-9.14"/><polyline points="23 3 12 14 9 11"/></svg>
                    `;
                    toastIcon.style.backgroundColor = 'rgba(16, 185, 129, 0.1)';
                    toastIcon.style.color = 'var(--success-color)';
                } else if (type === 'error') {
                    toastIcon.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
                    `;
                    toastIcon.style.backgroundColor = 'rgba(239, 68, 68, 0.1)';
                    toastIcon.style.color = 'var(--danger-color)';
                } else if (type === 'warning') {
                    toastIcon.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                    `;
                    toastIcon.style.backgroundColor = 'rgba(245, 158, 11, 0.1)';
                    toastIcon.style.color = 'var(--warning-color)';
                }
                
                // Show toast
                toast.classList.add('active');
                
                // Hide after 3 seconds
                setTimeout(() => {
                    toast.classList.remove('active');
                }, 3000);
            }
            
            // Helper functions
            function formatDate(dateString) {
                const date = new Date(dateString);
                return date.toLocaleDateString('es-ES', { day: '2-digit', month: '2-digit', year: 'numeric' });
            }
        });
    </script>
</body>
</html>

